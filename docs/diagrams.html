<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory diagrams</title>
</head>


<body>
<div class="head">
<h1>Theory diagrams</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Commutative diagrams›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Commutative diagrams are convenient tools in mathematics that show how different paths of 
 functions or maps between objects lead to the same result.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="diagrams.html"><span>diagrams</span></a><span>
 </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="relations.html"><span>relations</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Basic Diagrams›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Functions›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A commutative triangle states that a function "factorizes" as a composition of two given functions.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.triangle_def|fact"><span class="entity_def" id="diagrams.triangle_def|thm"><span class="entity_def" id="diagrams.triangle_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.triangle|const"><span>triangle</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>o</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>-FACTOR</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>triangle</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B12_comb|const"><span><span class="hidden">❙</span><b>B</b><span class="hidden">⇩</span><sub>1</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>(;)</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Commutative triangles are often read as "h factors through f and g", and diagrammatically represented as:›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span>-FACTOR</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.triangle_def|fact"><span>triangle_def</span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.triangleDiagram|const"><span>triangleDiagram</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>" </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword3"><span>//</span></span><span> </span><span class="keyword1"><span>∖</span></span><span> </span><span class="keyword1"><span>↓</span></span><span>_ </span><span class="keyword3"><span>//</span></span><span> _</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span> 
          </span><span class="main"><span>∖</span></span><span>     </span><span class="main"><span>↓</span></span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span>
            </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span>   </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span>-FACTOR</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.triangle_def|fact"><span>triangle_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We say that an endofunction is idempotent when it is identical to the composition with itself, or,
 in other words, when it factors through itself.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.idempotent_def|fact"><span class="entity_def" id="diagrams.idempotent_def|thm"><span class="entity_def" id="diagrams.idempotent_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.idempotent|const"><span>idempotent</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>Set(</span></a></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>idempotent</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W31_comb|const"><span><span class="hidden">❙</span><b>W</b><span class="hidden">⇩</span><sub>3</sub><span class="hidden">⇩</span><sub>1</sub></span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span class="const"><span>triangle</span></span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.idempotent_def|fact"><span>idempotent_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>─</span></a></span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> 
                        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>∖</span></a></span><span>     </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>↓</span></a></span><span class="free"><span>f</span></span><span>
                          </span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span><span class="hidden">❙</span><b>B</b></span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.square_def|fact"><span class="entity_def" id="diagrams.square_def|thm"><span class="entity_def" id="diagrams.square_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.square|const"><span>square</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>o</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>square</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B22_comb|const"><span><span class="hidden">❙</span><b>B</b><span class="hidden">⇩</span><sub>2</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>(;)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>(;)</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.squareDiagram|const"><span>squareDiagram</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>" </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword3"><span>//</span></span><span> _</span><span class="keyword1"><span>↓</span></span><span> </span><span class="keyword1"><span>↓</span></span><span>_ </span><span class="keyword3"><span>//</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span> 
         </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>↓</span></span><span>      </span><span class="main"><span>↓</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>
          </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span>   </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.square|const"><span class="const"><span>square</span></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.square_def|fact"><span>square_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> 
       </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span>   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> 
       </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span>   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>─</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> 
                      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>∖</span></a></span><span>       </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
                        </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Relations›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A commutative triangle states that a relation "factorizes" as a composition of two given relations.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relTriangle_def|fact"><span class="entity_def" id="diagrams.relTriangle_def|thm"><span class="entity_def" id="diagrams.relTriangle_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relTriangle|const"><span>relTriangle</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'c</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'c</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>o</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>-FACTOR<span class="hidden">⇧</span><sup>r</sup></span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>relTriangle</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B12_comb|const"><span><span class="hidden">❙</span><b>B</b><span class="hidden">⇩</span><sub>1</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>(;<span class="hidden">⇧</span><sup>r</sup>)</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Analogously to functions, we can represent this as a diagram (read as "H factors through F and G".)›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>H</span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span>-FACTOR<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>H</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle_def|fact"><span>relTriangle_def</span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relTriangleDiagram|const"><span>relTriangleDiagram</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>" </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword3"><span>//</span></span><span> </span><span class="keyword1"><span>∖</span></span><span> </span><span class="keyword1"><span>↓</span></span><span>_ </span><span class="keyword3"><span>//</span></span><span> _</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span> 
          </span><span class="main"><span>∖</span></span><span>     </span><span class="main"><span>↓</span></span><span class="free"><span class="bound"><span class="entity"><span>G</span></span></span></span><span>
            </span><span class="free"><span class="bound"><span class="entity"><span>H</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span>   </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>H</span></span></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span>-FACTOR<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>G</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle_def|fact"><span>relTriangle_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Functional and relational triangle diagrams correspond as expected.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.triangle_funrel|fact"><span class="entity_def" id="diagrams.triangle_funrel|thm"><span>triangle_funrel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>⟹</span></span><span>
                           </span><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span class="const"><span>triangle</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span class="const"><span>relTriangle</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.triangle_relfun|fact"><span class="entity_def" id="diagrams.triangle_relfun|thm"><span>triangle_relfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span class="const"><span>relTriangle</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>    </span><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span class="const"><span>triangle</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We say that an endorelation is idempotent when it is identical to the composition with itself, or,
 in other words, when it factors through itself.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relIdempotent_def|fact"><span class="entity_def" id="diagrams.relIdempotent_def|thm"><span class="entity_def" id="diagrams.relIdempotent_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relIdempotent|const"><span>relIdempotent</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>Set(</span></a></span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.ERel|type"><span>ERel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.ERel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>relIdempotent</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W31_comb|const"><span><span class="hidden">❙</span><b>W</b><span class="hidden">⇩</span><sub>3</sub><span class="hidden">⇩</span><sub>1</sub></span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span class="const"><span>relTriangle</span></span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent_def|fact"><span>relIdempotent_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>─</span></a></span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> 
                           </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>∖</span></a></span><span>     </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>↓</span></a></span><span class="free"><span>R</span></span><span>
                             </span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>↔</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp_t|const"><span>(∘<span class="hidden">⇧</span><sup>r</sup>)</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The relational notions correspond to their functional counterparts as expected.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.idempotent_funRel|fact"><span class="entity_def" id="diagrams.idempotent_funRel|thm"><span>idempotent_funRel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.idempotent_relFun|fact"><span class="entity_def" id="diagrams.idempotent_relFun|thm"><span>idempotent_relFun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relSquare_def|fact"><span class="entity_def" id="diagrams.relSquare_def|thm"><span class="entity_def" id="diagrams.relSquare_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relSquare|const"><span>relSquare</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'c</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'d</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'c</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'d</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>o</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>relSquare</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B22_comb|const"><span><span class="hidden">❙</span><b>B</b><span class="hidden">⇩</span><sub>2</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>(;<span class="hidden">⇧</span><sup>r</sup>)</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>(;<span class="hidden">⇧</span><sup>r</sup>)</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relSquareDiagram|const"><span>relSquareDiagram</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>" </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword3"><span>//</span></span><span> _</span><span class="keyword1"><span>↓</span></span><span> </span><span class="keyword1"><span>↓</span></span><span>_ </span><span class="keyword3"><span>//</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>─</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span> 
         </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>↓</span></span><span>      </span><span class="main"><span>↓</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>
          </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>─</span></span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span>   </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSquare_def|fact"><span>relSquare_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> 
       </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span>   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> 
       </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span>   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>─</span></a></span><span> </span><span class="free"><span>j</span></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> 
                      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>∖</span></a></span><span>        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>↓</span></a></span><span class="free"><span>l</span></span><span>
                       </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Beware: Composition in relational squares must always be read along the principal (NW–SE) diagonal!›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>proposition</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>nitpick</span></span></span><span> </span><span class="comment1"><span>― ‹countermodel: wrong diagonal!›</span></span><span> </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proposition</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>nitpick</span></span></span><span> </span><span class="comment1"><span>― ‹countermodel: wrong diagonal!›</span></span><span> </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹An alternative definition in terms of pullbacks.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.relSquare_def2|fact"><span class="entity_def" id="diagrams.relSquare_def2|thm"><span>relSquare_def2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.C3412_comb|const"><span><span class="hidden">❙</span><b>C</b><span class="hidden">⇩</span><sub>3</sub><span class="hidden">⇩</span><sub>4</sub><span class="hidden">⇩</span><sub>1</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B22_comb|const"><span><span class="hidden">❙</span><b>B</b><span class="hidden">⇩</span><sub>2</sub><span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="relations.html#relations.relPullback|const"><span class="const"><span>relPullback</span></span></a><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="relations.html#relations.transpose|const"><span class="const"><span>transpose</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="relations.html#relations.relPullback|const"><span class="const"><span>relPullback</span></span></a><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="relations.html#relations.transpose|const"><span class="const"><span>transpose</span></span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Relational and functional squares correspond as expected.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.square_funrel|fact"><span class="entity_def" id="diagrams.square_funrel|thm"><span>square_funrel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span>
                         </span><a class="entity_ref" href="diagrams.html#diagrams.square|const"><span class="const"><span>square</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_equality|fact"><span>some_equality</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.square_relfun|fact"><span class="entity_def" id="diagrams.square_relfun|thm"><span>square_relfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSquare|const"><span class="const"><span>relSquare</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>    </span><a class="entity_ref" href="diagrams.html#diagrams.square|const"><span class="const"><span>square</span></span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Splittings›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Functions›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We say of two functions f and g that they form a splitting (of the identity </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span><span class="hidden">❙</span><b>I</b>›</span></span></span><span>) when g "undoes the
 effect" of f. In some literature, g (f) is called a left (right) inverse of f (g). We adopt another
 common (arguably less confusing) wording by referring to f (g) as the section (retraction) of g (f).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.splitting_def|fact"><span class="entity_def" id="diagrams.splitting_def|thm"><span class="entity_def" id="diagrams.splitting_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.splitting|const"><span>splitting</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>splitting</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.triangle|const"><span>-FACTOR</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.splitting_def|fact"><span>splitting_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A section f followed by the corresponding retraction g takes us back where we started.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.splitting|const"><span class="const"><span>splitting</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>─</span></a></span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span> 
                        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>∖</span></a></span><span>     </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>↓</span></a></span><span class="free"><span>g</span></span><span>
                          </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.triangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We say that an endofunction is involutive when it is self-inverse (i.e. it forms a splitting with itself).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.involutive_def|fact"><span class="entity_def" id="diagrams.involutive_def|thm"><span class="entity_def" id="diagrams.involutive_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.involutive|const"><span>involutive</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>Set(</span></a></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>)</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>involutive</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.splitting|const"><span class="const"><span>splitting</span></span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.involutive_def|fact"><span>involutive_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span><span class="hidden">❙</span><b>B</b></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Identity is the only function which is both involutive and idempotent.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.idempotent|const"><span class="const"><span>idempotent</span></span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.I_comb|const"><span><span class="hidden">❙</span><b>I</b></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Relations›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Analogously to functions, we can say of two relations S and R that they form a splitting (of the
 identity </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>𝒬›</span></span></span><span>). Similarly, we call S (R) the section (retraction) of R (S).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relSplitting_def|fact"><span class="entity_def" id="diagrams.relSplitting_def|thm"><span class="entity_def" id="diagrams.relSplitting_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relSplitting|const"><span>relSplitting</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>relSplitting</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relTriangle|const"><span>-FACTOR<span class="hidden">⇧</span><sup>r</sup></span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting_def|fact"><span>relSplitting_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A section S followed by the corresponding retraction R takes us back where we started.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>─</span></a></span><span class="free"><span>S</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span> 
                           </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>∖</span></a></span><span>     </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>↓</span></a></span><span class="free"><span>R</span></span><span>
                            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relTriangleDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹If a relation R (S) has a section (retraction) then it is right (left) total.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.rightTotal|const"><span class="const"><span>rightTotal</span></span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span>  </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>  </span><a class="entity_ref" href="relations.html#relations.leftTotal|const"><span class="const"><span>leftTotal</span></span></a><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹If a relation is both right-total and right-unique (surjective partial function) then it always 
 has a section, and moreover, when it has a retraction then that retraction is unique›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.exist_section|fact"><span class="entity_def" id="diagrams.exist_section|thm"><span>exist_section</span></span></span><span class="main"><span>:</span></span><span>     </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.rightTotal|const"><span class="const"><span>rightTotal</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.rightUnique|const"><span class="const"><span>rightUnique</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.unique_retraction|fact"><span class="entity_def" id="diagrams.unique_retraction|thm"><span>unique_retraction</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.rightTotal|const"><span class="const"><span>rightTotal</span></span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.rightUnique|const"><span class="const"><span>rightUnique</span></span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.unique|const"><span class="const"><span>unique</span></span></a><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹If a relation is both left-total and left-unique (injective nondeterministic function) then it has
 a retraction, and moreover, when it has a section it is unique.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.exist_retraction|fact"><span class="entity_def" id="diagrams.exist_retraction|thm"><span>exist_retraction</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.leftTotal|const"><span class="const"><span>leftTotal</span></span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.leftUnique|const"><span class="const"><span>leftUnique</span></span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.unique_section|fact"><span class="entity_def" id="diagrams.unique_section|thm"><span>unique_section</span></span></span><span class="main"><span>:</span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.leftTotal|const"><span class="const"><span>leftTotal</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.leftUnique|const"><span class="const"><span>leftUnique</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.unique|const"><span class="const"><span>unique</span></span></a><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.splitting_trans|fact"><span class="entity_def" id="diagrams.splitting_trans|thm"><span>splitting_trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>T</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We say that an endorelation is involutive when it is self-inverse (i.e. it forms a splitting with itself).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relInvolutive_def|fact"><span class="entity_def" id="diagrams.relInvolutive_def|thm"><span class="entity_def" id="diagrams.relInvolutive_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relInvolutive|const"><span>relInvolutive</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>Set(</span></a></span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.ERel|type"><span>ERel(</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.ERel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Set|type"><span>)</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>relInvolutive</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive_def|fact"><span>relInvolutive_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>↔</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="combinators.html#combinators.W21_comb|const"><span><span class="hidden">❙</span><b>W</b></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp_t|const"><span>(∘<span class="hidden">⇧</span><sup>r</sup>)</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Equality is the only relation which is both involutive and idempotent.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relIdempotent|const"><span class="const"><span>relIdempotent</span></span></a><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>𝒬</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Relational and functional notions correspond as expected.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.involutive_funRel|fact"><span class="entity_def" id="diagrams.involutive_funRel|thm"><span>involutive_funRel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.involutive_relFun|fact"><span class="entity_def" id="diagrams.involutive_relFun|thm"><span>involutive_relFun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Duality›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We encode (relational) duality as a relation between functions (relations). It arises by fixing 
 two of the arguments of a (relational) square as parameters (which we refer to as </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span>).›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Functions›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Two functions f and g are said to be dual wrt. to a pair of functions </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span> (as parameters).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.dual_def|fact"><span class="entity_def" id="diagrams.dual_def|thm"><span class="entity_def" id="diagrams.dual_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.dual|const"><span>dual</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>,</span></span><span>_</span><span class="keyword1"><span>-DUAL</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><span>-DUAL</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>   </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> 
                          </span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>↓</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span>
                            </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.squareDiagram|const"><span>·</span></a></span><span>  "</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We can also lift the previous notion of duality to apply to n-ary functions.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.dual2_def|fact"><span class="entity_def" id="diagrams.dual2_def|thm"><span class="entity_def" id="diagrams.dual2_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.dual2|const"><span>dual2</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'e</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span> </span><span class="tfree"><span>'e</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>,</span></span><span>_</span><span class="keyword1"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="func_sets.html#func_sets.relLiftAll|const"><span><span class="hidden">❙</span><b>Φ</b><span class="hidden">⇩</span><sub>∀</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.dual3_def|fact"><span class="entity_def" id="diagrams.dual3_def|thm"><span class="entity_def" id="diagrams.dual3_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.dual3|const"><span>dual3</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'e<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'e<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span> </span><span class="tfree"><span>'e<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'e<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>,</span></span><span>_</span><span class="keyword1"><span>-DUAL<span class="hidden">⇩</span><sub>3</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><span>-DUAL<span class="hidden">⇩</span><sub>3</sub></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="func_sets.html#func_sets.relLiftAll|const"><span><span class="hidden">❙</span><b>Φ</b><span class="hidden">⇩</span><sub>∀</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="comment1"><span>― ‹... </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>,n<span class="hidden">⇩</span><sub>2</sub>-DUAL<span class="hidden">⇩</span><sub>n</sub> ≡ <span class="hidden">❙</span><b>Φ</b><span class="hidden">⇩</span><sub>∀</sub> n<span class="hidden">⇩</span><sub>1</sub>,n<span class="hidden">⇩</span><sub>2</sub>-DUAL<span class="hidden">⇩</span><sub>n</sub><span class="hidden">⇩</span><sub>-</sub><span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.dual_def|fact"><span>dual_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.dual2_def|fact"><span>dual2_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.dual3_def|fact"><span>dual3_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|attribute"><span class="operator"><span>func_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual3|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual3|const"><span>-DUAL<span class="hidden">⇩</span><sub>3</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Note that if both </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span> are involutive, then the dual relation is symmetric.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.dual_symm|fact"><span class="entity_def" id="diagrams.dual_symm|thm"><span>dual_symm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.dual2_symm|fact"><span class="entity_def" id="diagrams.dual2_symm|thm"><span>dual2_symm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.involutive|const"><span class="const"><span>involutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹This notion does NOT correspond with the so-called "De Morgan duality" (although they are not unrelated).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proposition</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>(∧)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>(∨)</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>nitpick</span></span></span><span> </span><span class="comment1"><span>― ‹countermodel found›</span></span><span> </span><span class="keyword1"><span class="command"><span>oops</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We add a (convenient?) diagram for duality of binary functions (for unary functions it is just the square).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.dual2Diagram|const"><span>dual2Diagram</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>" </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>═</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword3"><span>//</span></span><span> _</span><span class="keyword1"><span>↓</span></span><span> </span><span class="keyword1"><span>↓</span></span><span>_ </span><span class="keyword3"><span>//</span></span><span> </span><span class="keyword1"><span>·</span></span><span> </span><span class="keyword1"><span>═</span></span><span>_</span><span class="keyword1"><span>→</span></span><span> </span><span class="keyword1"><span>·</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"  </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>═</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span> 
         </span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><span>↓</span></span><span>        </span><span class="main"><span>↓</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span>
           </span><span class="main"><span>·</span></span><span> </span><span class="main"><span>═</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="main"><span>·</span></span><span>   </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>,</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual2|const"><span>-DUAL<span class="hidden">⇩</span><sub>2</sub></span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Some examples of dual pairs of binary operations (recall that negation and complement are involutive).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>(∧)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span>           </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>(→)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>(∨)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span>           </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.sedulcxe|const"><span>(⇀)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.impl|const"><span>(⇒)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.compl|const"><span>─</span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span>           </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.compl|const"><span>─</span></a></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span> </span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.inter|const"><span>(∩)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.diff|const"><span>(∖)</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.compl|const"><span>─</span></a></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span>             </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>↓</span></a></span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.compl|const"><span>─</span></a></span><span>
        </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>═</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.compl|const"><span>─</span></a></span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B2_comb|const"><span>∘<span class="hidden">⇩</span><sub>2</sub></span></a></span><span class="main"><a class="entity_ref" href="func_sets.html#func_sets.inter|const"><span>(∩)</span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual2Diagram|const"><span>·</span></a></span><span>  "</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹For Relations›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Two relations R and T are said to be dual wrt. to a pair of relations </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span> (as parameters).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="diagrams.relDual_def|fact"><span class="entity_def" id="diagrams.relDual_def|thm"><span class="entity_def" id="diagrams.relDual_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="diagrams.relDual|const"><span>relDual</span></span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>Rel(</span></a></span><span class="tfree"><span>'a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>,</span></a></span><span class="tfree"><span>'b<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span class="main"><a class="entity_ref" href="logic_bridge.html#logic_bridge.Rel|type"><span>)</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"_</span><span class="keyword1"><span>,</span></span><span>_</span><span class="keyword1"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span class="keyword1"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>   </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> 
                           </span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span>      </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>↓</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span></span></span><span>
                             </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>T</span></span></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>→</span></a></span><span> </span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relSquareDiagram|const"><span>·</span></a></span><span>   "</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span>  </span><a class="entity_ref" href="diagrams.html#diagrams.relDual_def|fact"><span>relDual_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="relations.html#relations.rel_defs|attribute"><span class="operator"><span>rel_defs</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span>  </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="combinators.html#combinators.B1_comb_t&apos;|const"><span>;</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The notion of dual for relations corresponds to the counterpart notion for functions.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asRel|const"><span>asRel</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="relations.html#relations.totalFunction|const"><span class="const"><span>totalFunction</span></span></a><span> </span><span class="free"><span>T</span></span><span> 
            </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>,</span></a></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.dual|const"><span>-DUAL</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.asFun|const"><span>asFun</span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Existence of sections and retractions influences existence and uniqueness of duals. As a corollary, 
  if </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> (resp. </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span>) is involutive, then the dual relation is well-defined (exists and is unique).›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="relations.html#relations.relComp|const"><span>;<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>T</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.unique|const"><span class="const"><span>unique</span></span></a><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relDual_def|fact"><span>relDual_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="combinators.html#combinators.B12_comb_def|fact"><span>B12_comb_def</span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.B22_comb_def|fact"><span>B22_comb_def</span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.I_comb_def|fact"><span>I_comb_def</span></a><span> </span><a class="entity_ref" href="relations.html#relations.relComp_assoc|fact"><span>relComp_assoc</span></a><span> </span><a class="entity_ref" href="relations.html#relations.relComp_id2|fact"><span>relComp_id2</span></a><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting_def|fact"><span>relSplitting_def</span></a><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSquare_def|fact"><span>relSquare_def</span></a><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relTriangle_def|fact"><span>relTriangle_def</span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.unique_def|fact"><span>unique_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relSplitting|const"><span class="const"><span>relSplitting</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="func_sets.html#func_sets.unique|const"><span class="const"><span>unique</span></span></a><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="relations.html#relations.transpose|const"><span><span class="hidden">⇧</span><sup>⌣</sup></span></a></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Moreover, if both </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>n<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span> are involutive, then the dual relation is symmetric.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="diagrams.relDual_symm|fact"><span class="entity_def" id="diagrams.relDual_symm|thm"><span>relDual_symm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="diagrams.html#diagrams.relInvolutive|const"><span class="const"><span>relInvolutive</span></span></a><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>,</span></a></span><span class="free"><span>n<span class="hidden">⇩</span><sub>2</sub></span></span><span class="keyword1"><a class="entity_ref" href="diagrams.html#diagrams.relDual|const"><span>-DUAL<span class="hidden">⇧</span><sup>r</sup></span></a></span><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="relations.html#relations.rel_defs|fact"><span class="dynamic"><span class="dynamic"><span>rel_defs</span></span></span></a><span> </span><a class="entity_ref" href="func_sets.html#func_sets.func_defs|fact"><span class="dynamic"><span class="dynamic"><span>func_defs</span></span></span></a><span> </span><a class="entity_ref" href="combinators.html#combinators.comb_defs|fact"><span class="dynamic"><span class="dynamic"><span>comb_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>